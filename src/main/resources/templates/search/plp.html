<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="layout.html">
<head>
    <meta charset="UTF-8">
    <title>ê²€ìƒ‰ ê²°ê³¼ - SSAUC</title>
    <!-- list.html ìŠ¤íƒ€ì¼ì„ ë°˜ì˜í•˜ë˜, íŒŒì¼ëª…ì€ plp.cssë¡œ êµ¬ì„± -->
    <link rel="stylesheet" th:href="@{/css/list.css}">
    <!-- plp.js (ì•„ë˜ì—ì„œ ì„¤ëª…) -->
    <script th:src="@{/js/plp.js}"></script>
    <style>

        /* âœ… "ì´ nê°œì˜ ìƒí’ˆ"ì„ ì™¼ìª½ ëìœ¼ë¡œ ì´ë™ */
        .total-count {
            position: absolute;
            left: 20px;
            font-size: 16px;
            font-weight: bold;
        }
        .search-sort-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: relative;
            width: 100%;
            margin-bottom: 15px;
        }

        .search-bar {
            display: flex;
            align-items: center;
            width: 100%;
            max-width: 400px; /* í¬ê¸° ì¡°ì • */
            position: relative;
        }

        .search-bar input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding-right: 35px; /* ë‹ë³´ê¸° ì•„ì´ì½˜ ê³µê°„ í™•ë³´ */
        }

        .search-bar button {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
        }

        /* âœ… ì •ë ¬ ì˜µì…˜ì„ ì˜¤ë¥¸ìª½ ì •ë ¬ */
        .sort-dropdown {
            width: auto;
            min-width: 200px;
        }

        /* âœ… ìƒí’ˆ ê°œìˆ˜ í…ìŠ¤íŠ¸ */
        .total-count {
            font-size: 16px;
            font-weight: bold;
        }

        /* âœ… ìƒí’ˆ ì´ë¯¸ì§€ ë¬¸ì œ í•´ê²° */
        .product-card img {
            width: 100%;
            max-height: 200px;
            object-fit: cover;
            border-radius: 8px;
        }

        /* âœ… ìƒí’ˆ ëª©ë¡ ë ˆì´ì•„ì›ƒ ì •ë¦¬ */
        #productGrid {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: flex-start;
        }
        /* âœ… ê²€ìƒ‰ì°½ í¬ê¸° ì¤„ì´ê³  ì¤‘ì•™ ì •ë ¬ */
        .search-bar-wrapper {
            display: flex;
            justify-content: center;
            width: 100%;
        }

        .search-bar button img {
            width: 24px;
            height: 24px;
        }
    </style>
</head>
<body>
<div class="container" layout:fragment="content">

    <div class="container mt-4">
        <div class="row">

            <!-- [2] ì™¼ìª½ ì‚¬ì´ë“œë°”(í•„í„°) : list.htmlì˜ ì‚¬ì´ë“œë°”ì™€ ë™ì¼ -->
            <div class="col-lg-2">
                <div class="sidebar">
                    <h5>í•„í„°</h5>
                    <div class="canBid">
                        <input class="form-check-input" id="filter_available_bid" type="checkbox" onchange="toggleCheckBox()">
                        <span>ê²½ë§¤ ê°€ëŠ¥ë§Œ ë³´ê¸°</span>
                    </div>

                    <h5>ì¹´í…Œê³ ë¦¬</h5>
                    <div class="category-list">
                        <a th:href="@{/list/category(categoryId=1)}">ë””ì§€í„¸ê¸°ê¸°</a>
                        <a th:href="@{/list/category(categoryId=2)}">ê°€êµ¬/ì¸í…Œë¦¬ì–´</a>
                        <a th:href="@{/list/category(categoryId=3)}">ìœ ì•„ë™</a>
                        <a th:href="@{/list/category(categoryId=4)}">ì—¬ì„±ì˜ë¥˜</a>
                        <a th:href="@{/list/category(categoryId=5)}">ì—¬ì„±ì¡í™”</a>
                        <a th:href="@{/list/category(categoryId=6)}">ë‚¨ì„±íŒ¨ì…˜/ì¡í™”</a>
                        <a th:href="@{/list/category(categoryId=7)}">ìƒí™œê°€ì „</a>
                        <a th:href="@{/list/category(categoryId=8)}">ìƒí™œ/ì£¼ë°©</a>
                    </div>

                    <h5 class="mt-4">ê°€ê²©</h5>
                    <div class="price-filter">
                        <button class="price-button" th:data-min-price="0" th:data-max-price="20000" onclick="filterByPrice(this)">~2ë§Œì›</button>
                        <button class="price-button" th:data-min-price="20000" th:data-max-price="30000" onclick="filterByPrice(this)">2ë§Œì› ~ 3ë§Œì›</button>
                        <button class="price-button" th:data-min-price="30000" th:data-max-price="40000" onclick="filterByPrice(this)">3ë§Œì› ~ 4ë§Œì›</button>
                        <button class="price-button" th:data-min-price="40000" th:data-max-price="200000" onclick="filterByPrice(this)">4ë§Œì› ~ 20ë§Œì›</button>
                    </div>

                    <div class="price-input">
                        <input type="number" id="minPriceInput" placeholder="ìµœì†Œ ê°€ê²© (ì›)" min="0">
                        <span>~</span>
                        <input type="number" id="maxPriceInput" placeholder="ìµœëŒ€ ê°€ê²© (ì›)" min="0">
                        <button onclick="filterByInputPrice()" style="width: 30px; height: 30px; align-items: center">ğŸ”</button>
                    </div>

                    <button id="filterResetBtn" class="btn btn-secondary btn-sm mt-3">í•„í„° ì´ˆê¸°í™”</button>
                </div>
            </div>

            <!-- ì˜¤ë¥¸ìª½ ìƒí’ˆ ëª©ë¡ -->
            <div class="col-lg-10">
                <div class="search-sort-container">

                    <!-- ìƒí’ˆ ê°œìˆ˜ -->
                    <span id="totalCountLabel" class="total-count">ì´ 2ê°œì˜ ìƒí’ˆ</span>

                    <!-- ê²€ìƒ‰ì°½ -->
                    <div class="search-bar-wrapper">
                        <div class="search-bar">
                            <input type="text" id="searchInput" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”." th:value="${keyword}">
                            <button type="submit" id="searchIcon" class="icon-btn">
                                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/55/Magnifying_glass_icon.svg/768px-Magnifying_glass_icon.svg.png"
                                     alt="ê²€ìƒ‰ ì•„ì´ì½˜">
                            </button>
                        </div>
                    </div>

                    <!-- ì •ë ¬ ì˜µì…˜ -->
                    <select id="sortSelect" class="form-select form-select-sm sort-dropdown">
                        <option value="VIEW_DESC">ê¸°ë³¸ìˆœ (ì¡°íšŒìˆ˜ ë§ì€ ìˆœ)</option>
                        <option value="LIKE_DESC">ì¢‹ì•„ìš” ë§ì€ ìˆœ</option>
                        <option value="PRICE_ASC">ë‚®ì€ ê°€ê²©ìˆœ</option>
                        <option value="PRICE_DESC">ë†’ì€ ê°€ê²©ìˆœ</option>
                        <option value="BID_DESC">ì…ì°° ë§ì€ ìˆœ</option>
                        <option value="RECENT">ìµœì‹  ë“±ë¡ìˆœ</option>
                    </select>
                </div>

                <!-- ì—°ê´€ ê²€ìƒ‰ì–´ ì˜ì—­ -->
                <div id="relatedSearchContainer" class="related-search-container" style="display:none;">
                    <h3>ì—°ê´€ ê²€ìƒ‰ì–´</h3>
                    <ul id="relatedSearchList"></ul>
                </div>

                <!-- ìë™ì™„ì„± ëª©ë¡ (ì ˆëŒ€ ìœ„ì¹˜) -->
                <ul id="autoCompleteList"
                    style="position:absolute; display:none; border:1px solid #ddd; background:#fff; z-index:999;">
                </ul>

                <!-- í•œ ì¤„ 5ê°œì”©, ìµœëŒ€ 30ê°œ (row-cols-lg-5) -->
                <div id="productGrid" class="row row-cols-2 row-cols-md-3 row-cols-lg-5 g-3">
                    <!-- JSì—ì„œ ìƒí’ˆ ìƒì„± -->
                </div>

                <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
                <nav id="pagination" class="mt-4">
                    <!-- JSì—ì„œ í˜ì´ì§€ ë²„íŠ¼ ìƒì„± -->
                </nav>
            </div>



        </div>
    </div>
</div>

</body>
</html>
